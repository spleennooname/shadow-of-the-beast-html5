const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pixi-filters-fVcXxeUJ.js","assets/pixi-core-Cm8ucNvR.js","assets/pixi-container--XA1H1gw.js","assets/pixi-sprites-NGNZT2X3.js","assets/pixi-renderer-DLoYYMz9.js","assets/pixi-graphics-q8yFmetg.js","assets/vendor-Cffik5UH.js","assets/pixi-core-filters-BDggq3H4.js","assets/pixi-textures-Cq7m2Rp-.js"])))=>i.map(i=>d[i]);
import{aq as e,ar as t,R as i,_ as s}from"./pixi-core-Cm8ucNvR.js";import{T as a,S as r,A as n}from"./pixi-sprites-NGNZT2X3.js";import{e as o}from"./pixi-renderer-DLoYYMz9.js";import"./pixi-container--XA1H1gw.js";import"./vendor-Cffik5UH.js";import"./pixi-core-filters-BDggq3H4.js";import"./pixi-graphics-q8yFmetg.js";import"./pixi-textures-Cq7m2Rp-.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let h=null;const p=async()=>(h||(h=await s(()=>import("./pixi-filters-fVcXxeUJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),h),d=640,l=400,c="#000000",u="./sprites/1280x800/";(new class{constructor(){this.app=null,this.parallaxLayers={},this.character=null,this.gameSpeed=200,this.crtFilter=null,this.bloomFilter=null,this.audio=null,this.resizeObserver=null,this.resizeTimeout=null}async init(){this.app=new e,await this.app.init({width:d,height:l,backgroundColor:c,antialias:!0,preference:"webgl2",resizeTo:window}),this.app.ticker.maxFPS=60,this.app.ticker.minFPS=30,document.body.appendChild(this.app.canvas),this.setupResize(),await this.loadAssets(),await this.createScene(),this.app.ticker.add(e=>this.update(e));const t=document.getElementById("loading");t&&(t.style.display="none")}setupResize(){this.resize(),window.ResizeObserver?(this.resizeObserver=new ResizeObserver(e=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.resize()},16)}),this.resizeObserver.observe(document.body)):window.addEventListener("resize",()=>{this.resize()})}resize(){const e=window.innerWidth,t=window.innerHeight,i=e/d,s=t/l,a=Math.min(i,s);this.app.stage.scale.set(a),this.app.stage.position.set((e-d*a)/2,(t-l*a)/2),this.app.renderer.resize(e,t),this.crtFilter&&(this.crtFilter.time=.001*performance.now())}async loadAssets(){const e={aarbon:u+"aarbonRun@2x.png",sky:u+"sky@2x.png",moon:u+"luna@2x.png",barriere:u+"barriere@2x.png",erba0:u+"herbe0@2x.png",erba1:u+"herbe1@2x.png",erba2:u+"herbe2@2x.png",erba3:u+"herbe3@2x.png",erba4:u+"herbe4@2x.png",nuv0:u+"nuages0@2x.png",nuv1:u+"nuages1@2x.png",nuv2:u+"nuages2@2x.png",nuv3:u+"nuages3@2x.png",nuv4:u+"nuages4@2x.png",montagne:u+"montagnes@2x.png"};for(const[s,a]of Object.entries(e))"string"==typeof a&&a.length>0&&t.add({alias:s,src:a});try{await t.load(Object.keys(e))}catch(i){throw i}await this.loadAudio()}async loadAudio(){try{this.audio=new Audio("./audio/sotb.mp3"),this.audio.loop=!0,this.audio.volume=.7,await new Promise((e,t)=>{this.audio.addEventListener("canplaythrough",e,{once:!0}),this.audio.addEventListener("error",t,{once:!0}),this.audio.load()})}catch(e){}}async createScene(){const e=["sky","moon","aarbon","montagne","barriere"];for(const a of e){if(!t.get(a))return}const i=new a({texture:t.get("sky"),width:2*d,height:.5*l});i.tilePosition.x=0,i.position.set(-320,0),this.app.stage.addChild(i),this.parallaxLayers.sky={sprite:i,speed:60};const s=new r(t.get("moon"));s.position.set(500,10),s.blendMode="lighten";const n=await p();this.bloomFilter=new n.BloomFilter({blur:1.5,quality:4,strength:1,threshold:1}),this.app.stage.addChild(s);[{name:"nuv0",y:0,speed:160,blur:0},{name:"nuv1",y:42,speed:60,blur:.5},{name:"nuv2",y:102,speed:-20,blur:1},{name:"nuv3",y:140,speed:-80,blur:1.5},{name:"nuv4",y:150,speed:-140,blur:2}].forEach(e=>{const i=t.get(e.name),s=i.height,r=new a({texture:i,width:2*d,height:s});if(r.position.set(-320,e.y),r.tilePosition.x=0,e.blur>0){const t=new n.KawaseBlurFilter({blur:e.blur,quality:3});r.filters=[t]}this.app.stage.addChild(r),this.parallaxLayers[e.name]={sprite:r,speed:this.gameSpeed+e.speed}});const o=t.get("montagne"),h=new a({texture:o,width:2*d});h.position.set(-320,194),h.tilePosition.x=0,this.app.stage.addChild(h),this.parallaxLayers.montagne={sprite:h,speed:.6*this.gameSpeed};[{name:"erba4",y:378,speed:2.5*this.gameSpeed},{name:"erba3",y:364,speed:2*this.gameSpeed},{name:"erba2",y:350,speed:1.6*this.gameSpeed},{name:"erba1",y:344,speed:1.3*this.gameSpeed},{name:"erba0",y:340,speed:1*this.gameSpeed}].forEach(e=>{const i=t.get(e.name),s=new a({texture:i,width:2*d,height:i.height});s.position.set(-320,e.y),s.tilePosition.x=0,this.app.stage.addChild(s),this.parallaxLayers[e.name]={sprite:s,speed:e.speed}});const c=t.get("barriere"),u=new a({texture:c,width:2*d,height:c.height});u.position.set(-320,358),u.tilePosition.x=0,this.app.stage.addChild(u),this.parallaxLayers.barriere={sprite:u,speed:1.2*this.gameSpeed},this.createCharacter(),this.startAudio(),await this.setupCRTEffect()}startAudio(){if(this.audio){const e=this.audio.play();void 0!==e&&e.then(()=>{}).catch(()=>{const e=()=>{this.audio.play(),document.removeEventListener("click",e),document.removeEventListener("keydown",e)};document.addEventListener("click",e),document.addEventListener("keydown",e)})}}async setupCRTEffect(){const e=await p();this.crtFilter=new e.CRTFilter({curvature:1,lineWidth:3,lineContrast:.3,verticalLine:!1,noise:.25,noiseSize:1,seed:Math.random(),vignetting:.2,vignettingAlpha:.4,vignettingBlur:.8,time:.5,alpha:.1}),this.app.stage.filters=[this.bloomFilter,this.crtFilter]}createCharacter(){const e=t.get("aarbon"),s=[];for(let t=0;t<6;t++){const a=new i(78*t,0,78,100),r=new o({source:e.source,frame:a});s.push(r)}this.character=new n(s),this.character.position.set(d/2-50,250),this.character.animationSpeed=.2,this.character.loop=!0,this.character.autoUpdate=!0,this.character.play(),this.app.stage.addChild(this.character)}update(e){const t=e.deltaTime/60;Object.values(this.parallaxLayers).forEach(e=>{e.speed>0&&(e.sprite.tilePosition.x-=e.speed*t)}),this.crtFilter&&(this.crtFilter.time=.001*performance.now())}}).init().catch(e=>{const t=document.getElementById("loading");t&&(t.textContent="Error loading game. Please check console for details.",t.style.color="#ff6b6b")});
//# sourceMappingURL=index-DB--Tg7O.js.map
